######################################################################
# perdition.conf
#
# Sample configuration file for perdition. Format of a line is:
#
# <key> <value>
#
# Key is either a short or long option as per perdition -h|--help, without
# the leading - or --.  Blank lines are ignored, as is anything including
# and after a # (hash) on a line. If a \ precedes a new line then the lines
# will be concatenated.  If a \ precedes any other character, including a #
# (hash) it will be treated as a literal. Anything inside single quotes (')
# will be treated as a litreal. Anything other than a (') inside double
# quotes (") will be treated as a litreal. Whitespace in keys must be
# escaped or quoted. Whitespace in values need not be escaped or quoted.
#
# Options that do not make sense in the configuration file such as h|help
# and f|config_file  are ignored. Options specified on the command line
# override the options in this file.
#
######################################################################

# A|add_domain:
# Appends a domain to the USER based on the IP address connected to in given
# state(s). State may be one of servername_lookup, local_authentication,
# remote_login and all. See manpage for details of states.  
# (default "(null)")
#A servername_lookup
#add_domain remote_login

# a|authenticate_in:
# User is authenticated by perdition before connection to backend server is
# made. Only available if perdition is compiled with PAM support.
#a
#authenticate_in

# B|no_bind_banner:
# If b|bind_address is specified, then the address will be resolved and
# the reverse-lookup of this will be used in the greeting. This option
# disables this behaviour an reverts to using the uname to derive the
# hostname for the greeting
#B
#no_bind_banner

# b|bind_address ip_address|hostname:
# Bind to interfaces with this address.  In non-inetd mode, connections
# will only be accepted on interfaces with this address. If NULL
# connections will be accepted from all interfaces. In inetd and non-inetd
# mode the source address of connections to real servers will be this
# address, if NULL then the operating system will select a source address.
# (default "(null)")
#b 127.0.0.1
#bind_address 127.0.0.1

# C|connection_logging:
# Log interaction between clients and perdition. This does
# not include interactions between clients and back-end servers.
# Note: d|debug must be specified for this option to take effect.
#C
#connection_logging

# connect_relog SECONDS:
# How often to relog the connection.
# For use in conjunction with POP and IMAP before SMTP.
# If zero, then the connection will not be reloged.
# (default 300)
#connect_relog 300

# c|client_server_specification:
# Allow USER of the form
# user<delimiter>server[:port] to
# specify the server and port for a user
#c
#client_server_specification

# D|domain_delimiter string:
# Delimiter used for c|client_server_specification and
# s|strip_domain options. Multicharacter delimiters are permitted
# (default "@")
#D @
#domain_delimiter \#

# d|debug:
# Turn on verbose debuging to syslog.
#d
#debug

# F|log_facility facility:
# Syslog facility to log to. If the facility has a leading '/' then it will
# be treated as a file. If is "-" or "+" then log to stdout or stderr
# respectivley.
# (default "mail")
# Notes: If an error occurs before options are read it may be logged to
# stdout. If stdout or stderr are used, then the process will not fork
# and detach from the terminal.
#F mail
#log_facility /dev/null

# g|group: group
# Group to run as (default "nobody")
#g nobody
#group nobody

# I|capability|pop_capability|imap_capability
# When using a POP3 based protocol, the capabilities should be
# delimited by two spaces. This is because the capabilities themselves
# may contain single spaces. The default is: "UIDL  USER".
#
# When using an IMAP4 based protocol, this string is taken as a string
# literal that will be returned when a client issues the CAPABILITY
# command. As such the capabilities should be space delimited.
# The default is: "IMAP4 IMAP4REV1". However perdition does
# support RFC 2088 non-synchronising string literals, if the real
# servers also support this then the capability may be set to
# "IMAP4 IMAP4REV1 LITERAL+".
#
# If perdition is listening for TLS connections then the
# capability STLS for POP3 or STARTTLS for IMAP4 will be
# appended to the list of capabilities if it is not already
# present. Simmilarly these capabilities will be removed from
# the list of capabilities if they are present and perdition is not
# listening for TLS connections.
#I IMAP4 IMAP4REV1 LITERAL+
#I IMAP4 IMAP4REV1
#imap_capability IMAP4


# i|inetd_mode: 
# Run in inetd mode
#i
#inetd_mode

# L|connection_limit: number
# Maximum number of connections to accept simultaneously. A value of zero
# sets no limit on the number of simultaneous connections.
# (default 0)
#L 64
#connection_limit 64

# l|listen_port: port
# Port to listen on. (default "protocol dependent")
#l 110
#listen_port 110

# M|map_library: filename
# Library to open that provides functions to look up the server for a user.
# A null library mean no library will be accessed and hence, no lookup will
# take place. (default "/usr/lib/libperditiondb_gdbm.so")
# M /usr/lib/libperditiondb_gdbm.so
# map_library /usr/lib/libperditiondb_gdbm.so
# map_library /usr/lib/libperditiondb_posix_regex.so
# map_library /usr/lib/libperditiondb_mysql.so
# # map_library ""

# m|map_library_opt: string
# String option to pass to database access function provided by the library
# specified by the M|map_library option. The treatment of this string is up
# to the library, in the case of perditiondb_gdbm the gdbm map to access is
# set.
#m /etc/perdition/popmap.gdbm.db
#map_library_opt /etc/perdition/popmap.gdbm.db
#map_library_opt /etc/perdition/popmap.re
#map_library_opt ""

# no_daemon:
# Do not detach from terminal. 
# Makes no sense if -i|--inetd_mode is in opperation.
#no_daemon


# n|no_lookup
# Disable host and port lookup.
# Please note that if this option is enabled, then perdition will
# not resolve hostnames returned by popmap lookups, thus your popmap
# must return ip addresses instead.
#n
#no_lookup

# o|server_ok_line:
# If authentication with the back-end server is successful then send the
# servers +OK line to the client, instead of generting one
#o
#server_ok_line

# P|protocol: protocol
# Protocol to use (default "POP3") available protocols: "POP3, IMAP4"
#P POP3
#protocol POP3

# p|outgoing_port: port
# Define a port to use if a port is not defined for a user in
# popmap. (default "protocol dependent")
#p 110
#outgoing_port 110

# s|outgoing_server: servername[,servername...]
# Define a server to use if a user is not in the popmap.
# (default "(NULL)")
#s  sarah:110,locahost
#outgoing_server  sarah:110,localhost
#outgoing_server  sarah:110
#outgoing_server  sarah

# S|strip_domain: state[,state...]
# Allow USER of the from user<delimiter>domain where <delimiter>domain
# will be striped off in given state(s). State may be one of
# servername_lookup, local_authentication, remote_login and all.
# See manpage for details of states.
# (default "(null)")
#S all
#strip_domain servername_lookup

# t|timeout: seconds
# Idle timeout in seconds. Value of zero sets infinite timeout.
# (default 1800)
#t 1800
#timeout 1800

# u|username: username
# Username to run as (default "nobody")
#u nobody
#username nobody

# U|username_from_database:
# If  the  servername  in the popmap specified in the form:
# user<delimiter>domain then use  the  username given  by the servername.
# If a servername is given in this form then the domain will be used  as
# the server to connect   to,  regarless  of  it  the
# U|username_from_database option is specified  or not.
#U
#username_from_database

# q|quiet:
# Only log errors. Overriden by d|debug
#q
#quiet

# login_disabled:
# Do not allow users to log in.
# Add LOGINDISABLED to capability list in IMAP4 and IMAP4S mode.
#login_disabled

# lower_case state[,state...]:
# Convert usernames to lower case according the the locale in given state(s).
# State may be one of servername_lookup, local_authentication, remote_login
# and all See manpage for details of states.
# (default "(null)")
#lower_case remote_login

# query_str format[,format...]:
# Speficy a list of query strings to search for in the popmap, in order.
# See man page for details.
#query_str \\U
#query_str \\u,\\D\\d
#query_str \\I
#query_str \\u\\da_domain,\\da_domain

# ssl_mode:
# Use SSL and or TLS for the listening and/or  outgoing  connections.  A
# comma delimited list of: none, ssl_listen,  ssl_outgoing,   ssl_all,
# tls_listen, tls_outgoing,  tls_all. TLS is defined in RFC 2595.  Only
# available if perdition is  compiled  with  SSL support.  
# (default # "(null)")
#
# none:  Do  not  use SSL or TLS for any connections.  This is  the  same
# as  providing  no  option,  the default.
#
# ssl_listen: When listening for incoming connections they will be treated
# as SSL connections.
#
# ssl_outgoing:  Use SSL to connect to  real pop servers.
#
# ssl_all: Short hand for ssl_listen,ssl_outoing.
#
# tls_listen: When listening for incoming connections they will be treated
# as TLS connections.  
# 
# tls_outgoing: Use TLS to connect to real pop/imap servers.
#
# tls_all: Short hand for tls_listen,tls_outgoing.
#
#ssl_mode ssl_listen

# ssl_ca_file:
# Certificate Authorities to use when verifying certificates of
# real servers. Used for SSL or TLS outgoing connections.
# If  then verification will not take place
# (default "/etc/perdition/perdition.ca.pem")
#ssl_ca_file /etc/perdition/perdition.ca.pem

# ssl_cert_file:
# Certificate to use when listening for  SSL  or  TLS connections. Only  
# available  if perdition is compiled with SSL support.
# (default "/etc/perdition/perdition.key.pem")
#ssl_cert_file /etc/perdition/perdition.key.pem

# ssl_key_file:
# Public key to use when listening  for  SSL  or  TLS connections.  Only
# available  if perdition is compiled with SSL support.  
# (default "/etc/perdition/perdition.crt.pem")
#ssl_key_file /etc/perdition/perdition.crt.pem

# ssl_listen_ciphers:
# Cipher list when listening for SSL or TLS connections.
# (default "(null)")
#ssl_listen_ciphers "ALL:!ADH:RC4+RSA:+SSLv2:@STRENGTH"

# ssl_outgoing_ciphers:
# Cipher list when making outgoing SSL or TLS connections.
# (default "(null)")
#ssl_outgoing_ciphers "ALL:!ADH:RC4+RSA:+SSLv2:@STRENGTH"

# ssl_no_cn_verify:
# Don't verify the real-servers common name with the name used.
# to connect to the server. Used for SSL or TLS outgoing
# connections.
#ssl_no_cn_verify


